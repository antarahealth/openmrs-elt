{
  "spark": {
    "appName": "OpenMRS ELT Pipeline",
    "master": "local[*]",
    "packages": [
      "mysql:mysql-connector-java:8.0.19",
      "io.delta:delta-core_2.11:0.5.0",
      "org.apache.spark:spark-sql_2.11:2.4.5",
      "org.apache.spark:spark-streaming-kafka-0-8_2.11:2.4.5"
    ],
    "conf": {
      "spark.driver.host": "0.0.0.0",
      "spark.executor.memory": "10g",
      "spark.driver.memory": "10g",
      "spark.sql.repl.eagerEval.enabled": "True",
      "jsonstore.rdd.partitions": 15000,
      "spark.executor.instances": 10,
      "spark.driver.maxResultSize": "20g",
      "spark.executor.heartbeatInterval":"10000000",
      "spark.network.timeout": "10000000",
      "spark.sql.crossJoin.enabled": "True",
      "spark.sql.autoBroadcastJoinThreshold": 0,
      "spark.sql.shuffle.partitions": 1000,
      "spark.executor.extraJavaOptions": "-XX:+AlwaysPreTouch -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark -XX:+DisableExplicitGC",

      "spark.locality.wait": 100,
      "spark.streaming.backpressure.enabled": "true",
      "spark.streaming.receiver.writeAheadLog.enable": "true",
      "spark.streaming.unpersist":"true",
      "spark.streaming.kafka.consumer.poll.ms": "512",
      "spark.streaming.kafka.maxRetries":"5",

      "spark.databricks.delta.optimizeWrite.enabled": "true",
      "spark.databricks.delta.autoCompact.enabled": "true"
    },
    "streaming": {
      "batchDuration": 20,
      "checkpointDir": "./checkpoint"
    }
  },
  "kafka":{
    "encounter-obs-orders" : {
      "topics":["dbserver1.openmrs.obs", "dbserver1.openmrs.orders", "dbserver1.openmrs.encounter"],
      "config":{
        "metadata.broker.list": "0.0.0.0:9092",
        "auto.offset.reset": "largest",
        "auto.create.topics.enable":"true"
      }
    }
  },
  "delta":{
    "tables":{
      "flat_obs_orders":{
        "path":"flat_obs_orders.delta",
        "partitionBy": "patient_id"
      }
    }

  },
  "mysql": {
    "host": "localhost",
    "port": "3306",
    "username": "xxxxx",
    "password": "xxxx",
    "openmrsDB": "openmrs"
  }


}